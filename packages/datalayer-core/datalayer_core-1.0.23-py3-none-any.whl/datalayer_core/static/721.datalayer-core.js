"use strict";(self.webpackChunk_datalayer_core=self.webpackChunk_datalayer_core||[]).push([[721],{721:(e,n,r)=>{r.r(n),r.d(n,{createMarkdownParser:()=>l,default:()=>d});var a=r(47963),t=r(48425),i=r(31786),o=r(97491);new a.Token("@jupyterlab/mermaid:IMermaidManager","a manager for rendering mermaid text-based diagrams");const c=new a.Token("@jupyterlab/mermaid:IMermaidMarkdown","a manager for rendering mermaid text-based diagrams in markdown fenced code blocks"),s="```~~~";function l(e,n){return{render:r=>u.render(r,e,n)}}const d={id:"@jupyterlab/markedparser-extension:plugin",description:"Provides the Markdown parser.",autoStart:!0,provides:o.sc,requires:[i.db],optional:[c],activate:(e,n,r)=>l(n,{blocks:r?[r]:[]})};var u;!function(e){let n=null,i=null,o=[],c=null,l={},d=new t.LruCache;async function u(e){if(i)return i;if(n)return await n.promise;o=(null==e?void 0:e.blocks)||[],o=o.sort(((e,n)=>{var r,a;return(null!==(r=e.rank)&&void 0!==r?r:1/0)-(null!==(a=n.rank)&&void 0!==a?a:1/0)})),n=new a.PromiseDelegate;const[{marked:t,Renderer:c},s]=await Promise.all([r.e(5346).then(r.bind(r,45346)),f()]);for(const e of s)t.use(e);return l={async:!0,gfm:!0,walkTokens:m,renderer:g(c)},i=t,n.resolve(i),i}async function f(){return Promise.all([(async()=>(await r.e(8447).then(r.bind(r,88447))).gfmHeadingId())(),(async()=>(await r.e(2922).then(r.bind(r,62922))).mangle())()])}function g(e){const n=new e,r=n.code;return n.code=(e,a)=>{for(const n of o)if(n.languages.includes(a)){const r=n.render(e);if(null!=r)return r}const t=`${a}${s}${e}${s}`,i=d.get(t);return null!=i?i:r.call(n,e,a)},n}async function m(e){if("code"===e.type){if(e.lang)for(const n of o)if(n.languages.includes(e.lang))return void await n.walk(e.text);await async function(e){const{lang:n,text:r}=e;if(!n||!c)return;const a=`${n}${s}${r}${s}`;if(d.get(a))return;const t=document.createElement("div");try{await c.highlight(r,c.findBest(n),t);const e=`<pre><code class="language-${n}">${t.innerHTML}</code></pre>`;d.set(a,e)}catch(e){console.error(`Failed to highlight ${n} code`,e)}finally{t.remove()}}(e)}}e.render=async function(e,n,r){return c=n,i||(i=await u(r)),i(e,l)},e.initializeMarked=u}(u||(u={}))}}]);