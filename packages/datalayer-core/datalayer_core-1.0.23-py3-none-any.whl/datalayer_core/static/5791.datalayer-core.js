"use strict";(self.webpackChunk_datalayer_core=self.webpackChunk_datalayer_core||[]).push([[5791],{5791:(e,s,n)=>{n.r(s),n.d(s,{ExercisePublic:()=>v,default:()=>b});var r=n(91896),t=n(56769),i=n(59886),a=n(36705),l=n(64506),c=n(81457),o=n(31728),d=n(77402),u=n(13676),h=n(74151),x=n(43275),p=n(3039),f=n(44447),j=n(55230),g=n(83073),m=n(33642),Z=n(67143),y=n(13565);const v=()=>{const{exerciseId:e}=(0,i.UO)();if(!e)return(0,r.jsx)(r.Fragment,{});const s=(0,y.qX)(),n=(0,j.gQ)(),v=s.iam().user,{kernelManager:b,defaultKernel:k}=(0,p.W$)(),{refreshExercise:E,getExercise:$,cloneExercise:S}=(0,Z.YT)(),C=(0,Z.s0)(),P=(0,a.N)(),{enqueueToast:T}=(0,Z.pm)(),[w]=(0,t.useState)("exercise-student"),[_,I]=(0,t.useState)(!1),[V,R]=(0,t.useState)(),[z,M]=(0,t.useState)((0,f.ZI)()),[q,D]=(0,t.useState)(!1),F=n.getInput(w),Q=(0,t.useMemo)((()=>k),[b]),Y=n.getGradeSuccess(w);(0,t.useEffect)((()=>{Y&&(D(Y),setTimeout((()=>{D(!1)}),5e3))}),[Y]),(0,t.useEffect)((()=>{E(e).then((s=>{if(s.success){const s=$(e);s||C("/"),R(s)}}))}),[]);const G=(0,t.useCallback)((async n=>{P({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then((n=>{n&&S(e).then((e=>{e.success&&(T(e.message,{variant:"success"}),s.layout().triggerItemsRefresh(),C(`/${v.handle}/library/exercises`))}))}))}),[P,V]);return V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{children:(0,r.jsxs)(c.Z,{display:"flex",children:[(0,r.jsx)(c.Z,{flex:1,children:(0,r.jsx)(o.Z,{sx:{fontSize:3},children:"Exercise"})}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)(d.Z,{children:[v&&V&&(0,r.jsx)(u.r,{variant:"default",size:"small",onClick:()=>C(`/${V.organization?.handle??V.owner?.handle}/${V.space?.handle}/exercise/${V.id}`),children:"Edit"}),v&&V&&(0,r.jsx)(u.r,{variant:"default",size:"small",leadingVisual:x.jcu,onClick:G,children:"Clone"})]})})]})}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(h.Z,{children:V.name}),(0,r.jsx)(h.Z,{as:"p",color:"fg.muted",bg:"neutral.muted",p:2,children:V.description})]}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(g.r,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:Q,id:w,codePre:V.codePre,code:V.codeQuestion,receipt:z})}),(0,r.jsxs)(c.Z,{display:"flex",gridGap:3,pt:2,pb:2,children:[(0,r.jsx)(c.Z,{children:(0,r.jsx)(u.r,{variant:"danger",leadingVisual:x.UOT,onClick:e=>{e.preventDefault(),I(!_)},children:"Show help"})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(u.r,{variant:"default",leadingVisual:x.bnu,onClick:e=>{e.preventDefault(),n.setInput(w,V.codeQuestion)},children:"Reset"})})]}),_&&(0,r.jsx)(h.Z,{as:"p",color:"danger.fg",p:2,children:V.help??"No help available."}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(u.r,{variant:"default",leadingVisual:x.Zi2,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),n.setExecuteRequest(w,`\nsetup_state(stu_code = """${V.codePre}\n${F}""", sol_code = """${V.codePre}\n${V.codeSolution}""")\n${V.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${z}</div><h1>ðŸŽ‰ Success!</h1>')\n`)},children:"Validate your solution"}),(0,r.jsx)(h.Z,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Validate your solution with this button."})]}),q&&(0,r.jsx)(m.xP,{})]}):(0,r.jsx)(r.Fragment,{})},b=v}}]);