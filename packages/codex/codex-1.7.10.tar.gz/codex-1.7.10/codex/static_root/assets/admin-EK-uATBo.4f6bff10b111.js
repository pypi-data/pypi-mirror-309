import{p as I,o as Y,g as W,r as j,c as P,u as L,a as s,F as x,m as A,i as le,b as J,t as S,d as de,e as ce,f as ue,h as me,j as be,_ as B,k as b,l as m,n as C,w as p,q as fe,s as F,v as _,x as E,y as K,z as ve,A as Q,B as pe,C as M,D as Z,E as we,G as ge,H as _e,I as Se}from"./main-BK1Y9SuN.js";import{A as he,V as ye,a as Ve,b as Te,U as Ae,c as Ce}from"./unauthorized-BqMMPq6N.js";import{S as xe,a as Be}from"./settings-drawer-CD3azBc0.js";import{TABS as ee,useAdminStore as D}from"./admin-ef9o9DWy.js";import{m as $e,u as ke,V as q,f as De,a as Pe,s as Ie,b as We,c as Le,d as Ue,e as ze}from"./forwardRefs-CIB4pjXm.js";import{m as Ee,V as H,a as Me,b as N}from"./VWindowItem-DrdLuzoo.js";import{m as He,V as X}from"./VDivider-FBjAmdUU.js";import{u as Ne}from"./VDialog-OMVMX5uI.js";import"./change-password-dialog-IN09owSO.js";import"./VForm-NaAcaZEL.js";import"./VSelectionControl-BDXa3gVL.js";import"./ssrBoot-DXTtRnkT.js";import"./copy-to-clipboard-DoUvDJVx.js";const G=Symbol.for("vuetify:v-tabs"),Ge=I({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Y($e({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),te=W()({name:"VTab",props:Ge(),setup(e,a){let{slots:i,attrs:t}=a;const{textColorClasses:l,textColorStyles:r}=ke(e,"sliderColor"),n=j(),o=j(),c=P(()=>e.direction==="horizontal"),f=P(()=>{var w,d;return((d=(w=n.value)==null?void 0:w.group)==null?void 0:d.isSelected.value)??!1});function U(w){var u,g;let{value:d}=w;if(d){const v=(g=(u=n.value)==null?void 0:u.$el.parentElement)==null?void 0:g.querySelector(".v-tab--selected .v-tab__slider"),z=o.value;if(!v||!z)return;const ae=getComputedStyle(v).color,h=v.getBoundingClientRect(),y=z.getBoundingClientRect(),$=c.value?"x":"y",k=c.value?"X":"Y",O=c.value?"right":"bottom",V=c.value?"width":"height",ne=h[$],se=y[$],T=ne>se?h[O]-y[O]:h[$]-y[$],oe=Math.sign(T)>0?c.value?"right":"bottom":Math.sign(T)<0?c.value?"left":"top":"center",re=(Math.abs(T)+(Math.sign(T)<0?h[V]:y[V]))/Math.max(h[V],y[V])||0,ie=h[V]/y[V]||0,R=1.5;Pe(z,{backgroundColor:[ae,"currentcolor"],transform:[`translate${k}(${T}px) scale${k}(${ie})`,`translate${k}(${T/R}px) scale${k}(${(re-1)/R+1})`,"none"],transformOrigin:Array(3).fill(oe)},{duration:225,easing:Ie})}}return L(()=>{const w=q.filterProps(e);return s(q,A({symbol:G,ref:n,class:["v-tab",e.class],style:e.style,tabindex:f.value?0:-1,role:"tab","aria-selected":String(f.value),active:!1},w,t,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":U}),{...i,default:()=>{var d;return s(x,null,[((d=i.default)==null?void 0:d.call(i))??e.text,!e.hideSlider&&s("div",{ref:o,class:["v-tab__slider",l.value],style:r.value},null)])}})}),De({},n)}}),Oe=I({...Y(Ee(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Re=W()({name:"VTabsWindow",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:i}=a;const t=le(G,null),l=J(e,"modelValue"),r=P({get(){var n;return l.value!=null||!t?l.value:(n=t.items.value.find(o=>t.selected.value.includes(o.id)))==null?void 0:n.value},set(n){l.value=n}});return L(()=>{const n=H.filterProps(e);return s(H,A({_as:"VTabsWindow"},n,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),i)}),{}}}),je=I({...Me()},"VTabsWindowItem"),Fe=W()({name:"VTabsWindowItem",props:je(),setup(e,a){let{slots:i}=a;return L(()=>{const t=N.filterProps(e);return s(N,A({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),i)}),{}}});function qe(e){return e?e.map(a=>ue(a)?a:{text:a,value:a}):[]}const Xe=I({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...He({mandatory:"force",selectedClass:"v-tab-item--selected"}),...We(),...Le()},"VTabs"),Ye=W()({name:"VTabs",props:Xe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{attrs:i,slots:t}=a;const l=J(e,"modelValue"),r=P(()=>qe(e.items)),{densityClasses:n}=Ue(e),{backgroundColorClasses:o,backgroundColorStyles:c}=ze(S(e,"bgColor")),{scopeId:f}=Ne();return de({VTab:{color:S(e,"color"),direction:S(e,"direction"),stacked:S(e,"stacked"),fixed:S(e,"fixedTabs"),sliderColor:S(e,"sliderColor"),hideSlider:S(e,"hideSlider")}}),L(()=>{const U=X.filterProps(e),w=!!(t.window||e.items.length>0);return s(x,null,[s(X,A(U,{modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},n.value,o.value,e.class],style:[{"--v-tabs-height":ce(e.height)},c.value,e.style],role:"tablist",symbol:G},f,i),{default:()=>{var d;return[((d=t.default)==null?void 0:d.call(t))??r.value.map(u=>{var g;return((g=t.tab)==null?void 0:g.call(t,{item:u}))??s(te,A(u,{key:u.text,value:u.value}),{default:t[`tab.${u.value}`]?()=>{var v;return(v=t[`tab.${u.value}`])==null?void 0:v.call(t,{item:u})}:void 0})})]}}),w&&s(Re,A({modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,key:"tabs-window"},f),{default:()=>{var d;return[r.value.map(u=>{var g;return((g=t.item)==null?void 0:g.call(t,{item:u}))??s(Fe,{value:u.value},{default:()=>{var v;return(v=t[`item.${u.value}`])==null?void 0:v.call(t,{item:u})}})}),(d=t.window)==null?void 0:d.call(t)]}})])}),{}}}),Je={name:"AdminTitleToolbar",components:{AppBanner:he,SettingsDrawerButton:xe},data(){return{TABS:ee}},computed:{...me(D,["activeTab"]),mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{$route(e){const i=e.path.split("/").at(-1);this.activeTab=be(i)}}};function Ke(e,a,i,t,l,r){const n=b("AppBanner"),o=b("SettingsDrawerButton");return m(),C("header",{id:"adminHeader",class:E({drawerMargin:!r.mdAndDown})},[s(n),s(Ve,{id:"titleBar",flat:"",density:"compact"},{default:p(()=>[a[2]||(a[2]=fe("span",{id:"buttonSpacer"},null,-1)),s(ye,{class:"codexToolbarTitle"},{default:p(()=>a[1]||(a[1]=[F(" Codex Administration ")])),_:1}),(m(),_(o,{key:r.mdAndDown,class:E(["adminSettingsButton",{invisible:!r.mdAndDown}]),disabled:!r.mdAndDown},null,8,["class","disabled"]))]),_:1}),s(Ye,{class:"adminTabs",grow:"","show-arrows":""},{default:p(()=>[(m(!0),C(x,null,K(l.TABS,c=>(m(),_(te,{key:c,modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=f=>e.activeTab=f),to:c.toLowerCase()},{default:p(()=>[F(ve(c),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1})],2)}const Qe=B(Je,[["render",Ke],["__scopeId","data-v-026356a3"]]),Ze={name:"AdminSettingsPanel",components:{AdminBrowserLink:Te}};function et(e,a,i,t,l,r){const n=b("AdminBrowserLink");return m(),_(n)}const tt=B(Ze,[["render",et]]),at={name:"AdminSettingsDrawer",components:{SettingsDrawer:Be,AdminSettingsPanel:tt},computed:{mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{mdAndDown(e){e||this.setSettingsDrawerOpen(!0)}},mounted(){this.mdAndDown||this.setSettingsDrawerOpen(!0)},methods:{...Q(pe,["setSettingsDrawerOpen"])}};function nt(e,a,i,t,l,r){const n=b("AdminSettingsPanel"),o=b("SettingsDrawer");return m(),_(o,{title:"Admin",temporary:r.mdAndDown},{panel:p(()=>[s(n)]),_:1},8,["temporary"])}const st=B(at,[["render",nt]]),ot={name:"AdminTabs",data(){return{TABS:ee}},computed:{...M(D,["doNormalComicLibrariesExist"]),...M(Z,["isBanner"]),...we(D,{librariesLoaded:e=>!!e.libraries,activeTab:e=>e.activeTab}),classes(){let e="tabItems";return this.isBanner&&(e+="Banner"),{[e]:!0}}},mounted(){this.librariesLoaded||this.loadTables(["Library"])},methods:{...Q(D,["loadTables"])}},rt={key:0,id:"noLibraries"};function it(e,a,i,t,l,r){const n=b("router-view");return m(),C(x,null,[s(H,{modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=o=>e.activeTab=o),class:E(r.classes),touch:!1},{default:p(()=>[(m(!0),C(x,null,K(l.TABS,o=>(m(),_(n,{key:o},{default:p(({Component:c})=>[s(N,{value:o,class:"tabItemContainer"},{default:p(()=>[(m(),_(ge(c)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue","class"]),e.doNormalComicLibrariesExist?_e("",!0):(m(),C("div",rt," Codex has no libraries. Select the Libraries tab and add a comic library. "))],64)}const lt=B(ot,[["render",it],["__scopeId","data-v-a3adef35"]]),dt={name:"MainAdmin",components:{AdminHeader:Qe,AdminSettingsDrawer:st,AdminTabs:lt,Unauthorized:Ae},data(){return{mdiLogin:Se}},computed:{...M(Z,["isUserAdmin"])}};function ct(e,a,i,t,l,r){const n=b("AdminHeader"),o=b("AdminTabs"),c=b("AdminSettingsDrawer"),f=b("Unauthorized");return e.isUserAdmin?(m(),_(Ce,{key:0},{default:p(()=>[s(n),s(o),s(c)]),_:1})):(m(),_(f,{key:1}))}const At=B(dt,[["render",ct]]);export{At as default};
