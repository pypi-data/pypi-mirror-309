import{g as $,u as D,a,p as M,J as N,t as Z,aO as ee,aP as be,aR as ye,c as F,e as _e,f as A,aT as te,_ as C,j as u,q as c,D as T,E as I,H as b,G as q,h as g,N as ke,P as pe,b as Q,r as we,bp as Ve,bq as Se,br as Ce,m as E,F as ae,w,W as H,n as Le,A as ne,z as xe,B as Be,I as Pe,k as Ae,a8 as Te,bs as Ie,bm as Ee,K as $e,T as De,v as Me,a5 as Re,bt as Fe,l as Ne,am as Ue}from"./main-B0XsokNO.js";import{d as se,C as j,V as ze}from"./VDialog-Z7zDn7KN.js";import{a as We}from"./change-password-dialog-DWFtOUJt.js";import{V as Oe,S as He}from"./VForm-CVsL2Cxt.js";import{d as oe,u as Ke,g as X,k as Y,f as qe,l as je,m as Ge,b as K}from"./VSelectionControl-dirzqbsX.js";import{d as G,c as ie,z as Je,y as Qe,i as Xe,k as x,l as Ye,x as Ze,A as et,D as tt,j as le,L as at,E as re,o as de,V as nt,F as st,q as ue}from"./forwardRefs--sLajfbv.js";import{u as ot}from"./ssrBoot-D0SN4REy.js";const it=M({text:String,...N(),...G()},"VToolbarTitle"),lt=$()({name:"VToolbarTitle",props:it(),setup(e,s){let{slots:t}=s;return D(()=>{const n=!!(t.default||t.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var o;return[n&&a("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(o=t.default)==null?void 0:o.call(t)])]}})}),{}}}),rt=[null,"prominent","default","comfortable","compact"],dt=M({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>rt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...et(),...N(),...Ze(),...Ye(),...G({tag:"header"}),...te()},"VToolbar"),ut=$()({name:"VToolbar",props:dt(),setup(e,s){var L;let{slots:t}=s;const{backgroundColorClasses:n,backgroundColorStyles:o}=ie(Z(e,"color")),{borderClasses:l}=Je(e),{elevationClasses:r}=Qe(e),{roundedClasses:d}=Xe(e),{themeClasses:i}=ee(e),{rtlClasses:y}=be(),m=ye(!!(e.extended||(L=t.extension)!=null&&L.call(t))),_=F(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),V=F(()=>m.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return _e({VBtn:{variant:"text"}}),D(()=>{var f;const B=!!(e.title||t.title),k=!!(t.image||e.image),S=(f=t.extension)==null?void 0:f.call(t);return m.value=!!(e.extended||S),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},n.value,l.value,r.value,d.value,i.value,y.value,e.class],style:[o.value,e.style]},{default:()=>[k&&a("div",{key:"image",class:"v-toolbar__image"},[t.image?a(x,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(se,{key:"image-img",cover:!0,src:e.image},null)]),a(x,{defaults:{VTabs:{height:A(_.value)}}},{default:()=>{var h,v,R;return[a("div",{class:"v-toolbar__content",style:{height:A(_.value)}},[t.prepend&&a("div",{class:"v-toolbar__prepend"},[(h=t.prepend)==null?void 0:h.call(t)]),B&&a(lt,{key:"title",text:e.title},{text:t.title}),(v=t.default)==null?void 0:v.call(t),t.append&&a("div",{class:"v-toolbar__append"},[(R=t.append)==null?void 0:R.call(t)])])]}}),a(x,{defaults:{VTabs:{height:A(V.value)}}},{default:()=>[a(oe,null,{default:()=>[m.value&&a("div",{class:"v-toolbar__extension",style:{height:A(V.value)}},[S])]})]})]})}),{contentHeight:_,extensionHeight:V}}}),ct={name:"AppBanner",computed:{...q(b,["isBanner"]),...I(b,{banner:e=>e.adminFlags.bannerText})}};function mt(e,s,t,n,o,l){return e.isBanner?(u(),c(ut,{key:0,id:"banner",height:"36",density:"compact",flat:"",title:e.banner},null,8,["title"])):T("",!0)}const gt=C(ct,[["render",mt],["__scopeId","data-v-76681126"]]),ft={name:"AdminBrowserLink",components:{CodexListItem:j},data(){return{mdiBookshelf:pe}},computed:{...q(ke,["lastRoute"])}};function ht(e,s,t,n,o,l){const r=g("CodexListItem");return u(),c(r,{to:e.lastRoute,"prepend-icon":o.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const vt=C(ft,[["render",ht]]),bt=M({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ge(),...je()},"VSwitch"),yt=$()({name:"VSwitch",inheritAttrs:!1,props:bt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,s){let{attrs:t,slots:n}=s;const o=Q(e,"indeterminate"),l=Q(e,"modelValue"),{loaderClasses:r}=tt(e),{isFocused:d,focus:i,blur:y}=Ke(e),m=we(),_=Ve&&window.matchMedia("(forced-colors: active)").matches,V=F(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),L=Se(),B=F(()=>e.id||`switch-${L}`);function k(){o.value&&(o.value=!1)}function S(f){var h,v;f.stopPropagation(),f.preventDefault(),(v=(h=m.value)==null?void 0:h.input)==null||v.click()}return D(()=>{const[f,h]=Ce(t),v=X.filterProps(e),R=Y.filterProps(e);return a(X,E({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":o.value},r.value,e.class]},f,v,{modelValue:l.value,"onUpdate:modelValue":U=>l.value=U,id:B.value,focused:d.value,style:e.style}),{...n,default:U=>{let{id:ce,messagesId:me,isDisabled:ge,isReadonly:fe,isValid:J}=U;const z={model:l,isValid:J};return a(Y,E({ref:m},R,{modelValue:l.value,"onUpdate:modelValue":[P=>l.value=P,k],id:ce.value,"aria-describedby":me.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:ge.value,readonly:fe.value,onFocus:i,onBlur:y},h),{...n,default:P=>{let{backgroundColorClasses:W,backgroundColorStyles:p}=P;return a("div",{class:["v-switch__track",_?void 0:W.value],style:p.value,onClick:S},[n["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](z)]),n["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](z)])])},input:P=>{let{inputNode:W,icon:p,backgroundColorClasses:he,backgroundColorStyles:ve}=P;return a(ae,null,[W,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":p||e.loading},e.inset||_?void 0:he.value],style:e.inset?void 0:ve.value},[n.thumb?a(x,{defaults:{VIcon:{icon:p,size:"x-small"}}},{default:()=>[n.thumb({...z,icon:p})]}):a(qe,null,{default:()=>[e.loading?a(at,{name:"v-switch",active:!0,color:J.value===!1?void 0:V.value},{default:O=>n.loader?n.loader(O):a(re,{active:O.isActive,color:O.color,indeterminate:!0,size:"16",width:"2"},null)}):p&&a(le,{key:String(p),icon:p,size:"x-small"},null)]})])])}})}})}),{}}}),_t={name:"AuthLoginDialog",components:{SubmitFooter:He,CodexListItem:j},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:Pe}},computed:{...I(Be,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...I(b,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...xe(b,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:s})=>(this.submitButtonEnabled=s,this.submitButtonEnabled)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){globalThis.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){globalThis.removeEventListener("keyup",this._keyUpListener)},methods:{...ne(b,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:s})=>{if(!s)return;const t=this.registerMode?"register":"login";return this.doAuth(t)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function kt(e,s,t,n,o,l){const r=g("CodexListItem"),d=g("SubmitFooter");return u(),c(ze,{modelValue:e.showLoginDialog,"onUpdate:modelValue":s[7]||(s[7]=i=>e.showLoginDialog=i),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:w(({props:i})=>[a(r,E(i,{"prepend-icon":o.mdiLogin,title:l.loginLabel}),null,16,["prepend-icon","title"])]),default:w(()=>[a(Oe,{id:"authDialog",ref:"form"},{default:w(()=>[a(K,{modelValue:o.credentials.username,"onUpdate:modelValue":s[0]||(s[0]=i=>o.credentials.username=i),autocomplete:"username",label:"Username",rules:o.rules.username,clearable:"",autofocus:"",onKeydown:s[1]||(s[1]=H(i=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),a(K,{ref:"password",modelValue:o.credentials.password,"onUpdate:modelValue":s[2]||(s[2]=i=>o.credentials.password=i),autocomplete:o.registerMode?"new-password":"current-password",label:"Password",rules:o.rules.password,clearable:"",type:"password",onKeydown:s[3]||(s[3]=H(i=>{o.registerMode?e.$refs.passwordConfirm.focus():l.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),a(oe,null,{default:w(()=>[o.registerMode?(u(),c(K,{key:0,ref:"passwordConfirm",modelValue:o.credentials.passwordConfirm,"onUpdate:modelValue":s[4]||(s[4]=i=>o.credentials.passwordConfirm=i),autocomplete:"new-password",label:"Confirm Password",rules:o.rules.passwordConfirm,clearable:"",type:"password",onKeydown:H(l.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):T("",!0)]),_:1}),e.adminFlags.registration?(u(),c(yt,{key:0,modelValue:o.registerMode,"onUpdate:modelValue":s[5]||(s[5]=i=>o.registerMode=i),label:"Register"},{default:w(()=>s[8]||(s[8]=[Le(" Register ")])),_:1},8,["modelValue"])):T("",!0),a(d,{verb:o.registerMode?"Register":"Login",table:"",disabled:!o.submitButtonEnabled,onSubmit:l.submit,onCancel:s[6]||(s[6]=i=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const pt=C(_t,[["render",kt],["__scopeId","data-v-f5e28bf6"]]),wt={name:"AuthMenu",components:{AuthLoginDialog:pt,ChangePasswordDialog:We,CodexListItem:j},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:Ie}},computed:{...I(b,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...ne(b,["logout"])}},Vt={key:0};function St(e,s,t,n,o,l){const r=g("CodexListItem"),d=g("ChangePasswordDialog"),i=g("AuthLoginDialog");return e.user?(u(),Ae("div",Vt,[a(r,{"prepend-icon":o.mdiLogout,title:l.logoutTitle,onClick:Te(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),t.showChangePassword?(u(),c(d,{key:0,user:e.user},null,8,["user"])):T("",!0)])):(u(),c(i,{key:1}))}const Ct=C(wt,[["render",St]]),Lt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function xt(e,s,t,n,o,l){return u(),c(re,E({"aria-label":"loading",class:"codexProgressCircular",indeterminate:t.indeterminate},e.$attrs),null,16,["indeterminate"])}const Bt=C(Lt,[["render",xt],["__scopeId","data-v-7bb4cf22"]]),Pt=M({actionText:String,bgColor:String,color:String,icon:$e,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...N(),...ue(),...st({size:void 0}),...te()},"VEmptyState"),At=$()({name:"VEmptyState",props:Pt(),emits:{"click:action":e=>!0},setup(e,s){let{emit:t,slots:n}=s;const{themeClasses:o}=ee(e),{backgroundColorClasses:l,backgroundColorStyles:r}=ie(Z(e,"bgColor")),{dimensionStyles:d}=de(e),{displayClasses:i}=Ee();function y(m){t("click:action",m)}return D(()=>{var S,f,h;const m=!!(n.actions||e.actionText),_=!!(n.headline||e.headline),V=!!(n.title||e.title),L=!!(n.text||e.text),B=!!(n.media||e.image||e.icon),k=e.size||(e.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},o.value,l.value,i.value,e.class],style:[r.value,d.value,e.style]},[B&&a("div",{key:"media",class:"v-empty-state__media"},[n.media?a(x,{key:"media-defaults",defaults:{VImg:{src:e.image,height:k},VIcon:{size:k,icon:e.icon}}},{default:()=>[n.media()]}):a(ae,null,[e.image?a(se,{key:"image",src:e.image,height:k},null):e.icon?a(le,{key:"icon",color:e.color,size:k,icon:e.icon},null):void 0])]),_&&a("div",{key:"headline",class:"v-empty-state__headline"},[((S=n.headline)==null?void 0:S.call(n))??e.headline]),V&&a("div",{key:"title",class:"v-empty-state__title"},[((f=n.title)==null?void 0:f.call(n))??e.title]),L&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:A(e.textWidth)}},[((h=n.text)==null?void 0:h.call(n))??e.text]),n.default&&a("div",{key:"content",class:"v-empty-state__content"},[n.default()]),m&&a("div",{key:"actions",class:"v-empty-state__actions"},[a(x,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",text:e.actionText}}},{default:()=>{var v;return[((v=n.actions)==null?void 0:v.call(n,{props:{onClick:y}}))??a(nt,{onClick:y},null)]}})])])}),{}}}),Tt={name:"EmptyState"};function It(e,s,t,n,o,l){return u(),c(At,{class:"empty"},De({_:2},[Me(e.$slots,(r,d)=>({name:d,fn:w(i=>[Re(e.$slots,d,E({props:r},i),void 0,!0)])}))]),1024)}const Et=C(Tt,[["render",It],["__scopeId","data-v-c7e33c8c"]]),$t=M({scrollable:Boolean,...N(),...ue(),...G({tag:"main"})},"VMain"),Dt=$()({name:"VMain",props:$t(),setup(e,s){let{slots:t}=s;const{dimensionStyles:n}=de(e),{mainStyles:o}=Fe(),{ssrBootStyles:l}=ot();return D(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,l.value,n.value,e.style]},{default:()=>{var r,d;return[e.scrollable?a("div",{class:"v-main__scroller"},[(r=t.default)==null?void 0:r.call(t)]):(d=t.default)==null?void 0:d.call(t)]}})),{}}}),Mt={name:"UnauthorizedEmptyState",components:{AppBanner:gt,AdminBrowserLink:vt,AuthMenu:Ct,PlaceholderLoading:Bt,EmptyState:Et},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:Ue}},computed:{...q(b,["isAuthChecked","isAuthorized","isUserAdmin"]),...I(b,{showAdminBrowserLink(e){var s,t,n;return((n=(t=(s=this.$router.currentRoute)==null?void 0:s.value)==null?void 0:t.name)==null?void 0:n.startsWith("admin"))&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},Rt={class:"login"};function Ft(e,s,t,n,o,l){const r=g("AppBanner"),d=g("AdminBrowserLink"),i=g("AuthMenu"),y=g("EmptyState"),m=g("PlaceholderLoading");return u(),c(Dt,{id:"unauthorized"},{default:w(()=>[a(r),e.isAuthChecked?(u(),c(y,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:o.mdiLockOutline},{default:w(()=>[Ne("div",Rt,[e.showAdminBrowserLink?(u(),c(d,{key:0})):T("",!0),a(i,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(u(),c(m,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const qt=C(Mt,[["render",Ft],["__scopeId","data-v-347bd693"]]);export{gt as A,Et as E,Bt as P,qt as U,lt as V,ut as a,vt as b,Dt as c,Ct as d};
