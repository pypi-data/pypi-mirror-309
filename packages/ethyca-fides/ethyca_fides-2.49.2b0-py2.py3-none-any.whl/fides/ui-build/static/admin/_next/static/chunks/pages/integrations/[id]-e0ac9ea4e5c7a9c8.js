(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1500],{50697:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations/[id]",function(){return n(34634)}])},81836:function(e,t,n){"use strict";var i=n(24246),a=n(27378),l=n(5152),o=n(79894),s=n.n(o);t.Z=e=>{let{breadcrumbs:t,fontSize:n="2xl",fontWeight:o="semibold",separator:r="->",lastItemStyles:c={color:"black"},normalItemStyles:d={color:"gray.500"},...u}=e;return(0,i.jsx)(l.aGc,{separator:r,fontSize:n,fontWeight:o,"data-testid":"breadcrumbs",...u,children:t.map((e,n)=>{let o=n+1===t.length;return e.title?(0,a.createElement)(l.gN6,{...d,...o?c:{},key:e.title,children:[(null==e?void 0:e.icon)&&(0,i.jsx)(l.xuv,{mr:2,children:e.icon}),e.link?(0,i.jsx)(l.Atw,{as:s(),href:e.link,isCurrentPage:o,children:e.title}):(0,i.jsx)(l.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:o,children:e.title})]}):null})})}},37541:function(e,t,n){"use strict";var i=n(24246),a=n(5152),l=n(19785),o=n.n(l),s=n(27378),r=n(81836);t.Z=e=>{let{breadcrumbs:t,isSticky:n=!0,children:l,rightContent:c,...d}=e;return(0,i.jsxs)(a.xuv,{bgColor:"white",paddingY:5,...n?{position:"sticky",top:0,left:0,zIndex:10}:{},...d,children:[(0,i.jsxs)(a.kCb,{alignItems:"flex-start",children:[(0,i.jsxs)(a.xuv,{flex:1,children:[o()(t)&&(0,i.jsx)(a.xuv,{marginBottom:l?4:0,children:(0,i.jsx)(r.Z,{breadcrumbs:t})}),(0,s.isValidElement)(t)&&t]}),c&&(0,i.jsx)(a.xuv,{children:c})]}),l]})}},70218:function(e,t,n){"use strict";n.d(t,{Od:function(){return l},QZ:function(){return a}});var i=n(27378);let a=e=>{let{items:t,selected:n,onChange:i}=e,a=t.every(e=>n.includes(e.id))&&!!t.length;return{allSelected:a,someSelected:t.some(e=>n.includes(e.id))&&!!t.length,handleToggleAll:()=>{a?i([]):i(t.map(e=>e.id))},handleToggleSelection:e=>{n.includes(e)?i(n.filter(t=>t!==e)):i([...n,e])}}},l=e=>{let{initialSelected:t,initialExcluded:n,initialAllSelected:a,itemCount:l}=e,[o,s]=(0,i.useState)(t),[r,c]=(0,i.useState)(n),[d,u]=(0,i.useState)(a||o.length===l),x=!!o.length||!!r.length;return{selected:o,excluded:r,allSelected:d,someSelected:x,handleToggleAll:()=>{d?(c([]),r.length||u(!1)):(s([]),u(!0))},handleToggleItemSelected:e=>{if(d)c(r.includes(e)?r.filter(t=>t!==e):[...r,e]);else{let t=o.includes(e)?o.filter(t=>t!==e):[...o,e];s(t),t.length===l&&u(!0)}}}}},35682:function(e,t,n){"use strict";var i=n(24246),a=n(5152);t.Z=e=>{let{title:t,icon:n,type:l,...o}=e;return(0,i.jsx)(a.wpx,{size:"small",type:l,"data-testid":"action-".concat(t),icon:n,iconPosition:"start",...o,children:t})}},34634:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var i=n(24246),a=n(5152),l=n(86677),o=n(36848),s=n(43124),r=n(11032),c=n(37541),d=n(84421),u=n(38683),x=n(75576),g=n(92222),m=n(59003),h=n(27378),j=n(58665);let p=(0,a.IUT)({displayName:"MonitorIcon",viewBox:"0 0 12 12",path:(0,i.jsx)("path",{d:"M1.33333 2.21875C1.15 2.21875 1 2.37344 1 2.5625V5.65625H3.66667C3.84167 5.65625 4.00417 5.75078 4.09583 5.90762L4.62708 6.8207L5.88542 4.22324C5.96667 4.05566 6.13125 3.94609 6.3125 3.93965C6.49375 3.9332 6.66667 4.02773 6.76042 4.18887L7.61458 5.65625H8.83333C9.11042 5.65625 9.33333 5.88613 9.33333 6.17188C9.33333 6.45762 9.11042 6.6875 8.83333 6.6875H7.33333C7.15833 6.6875 6.99583 6.59297 6.90417 6.43613L6.37292 5.52305L5.11458 8.12051C5.03333 8.28809 4.86875 8.39766 4.6875 8.4041C4.50625 8.41055 4.33333 8.31602 4.23958 8.15488L3.38542 6.6875H1V9.4375C1 9.62656 1.15 9.78125 1.33333 9.78125H10.6667C10.85 9.78125 11 9.62656 11 9.4375V2.5625C11 2.37344 10.85 2.21875 10.6667 2.21875H1.33333ZM0 2.5625C0 1.8041 0.597917 1.1875 1.33333 1.1875H10.6667C11.4021 1.1875 12 1.8041 12 2.5625V9.4375C12 10.1959 11.4021 10.8125 10.6667 10.8125H1.33333C0.597917 10.8125 0 10.1959 0 9.4375V2.5625Z",fill:"currentColor"})});var f=n(8540),b=n(98320),v=n(6111),C=n(60136),y=e=>{let{defaultSuccessMsg:t,defaultErrorMsg:n}=e,i=(0,a.pmc)();return{toastResult:e=>{(0,C.D4)(e)?i({status:"error",description:(0,C.e$)(e.error,n)}):i({status:"success",description:t})}}},_=n(98198),k=n(70218),w=n(39514);let S=(0,g.Cl)();var R=e=>{let{items:t,totalItemCount:n,selected:l,excluded:o,allSelected:s,someSelected:r,moreLoading:c,handleToggleSelection:d,handleToggleAll:u,onMoreClick:x}=e,p=t.map(e=>({id:e,isSelected:l.includes(e),isExcluded:o.includes(e)})),b=(0,h.useMemo)(()=>[S.display({id:"select",cell:e=>{let{row:t}=e;return(0,i.jsx)(f.k,{isChecked:t.original.isSelected||s&&!t.original.isExcluded,onChange:()=>d(t.original.id),dataTestId:"".concat(t.original.id,"-checkbox")})},header:()=>(0,i.jsx)(f.k,{isChecked:s,isIndeterminate:r,onChange:u,dataTestId:"select-all-checkbox"}),size:1}),S.accessor(e=>e.id,{id:"id",cell:e=>(0,i.jsx)(f.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(f.Rr,{value:"Scope",...e})})],[d,u,s,r]),v=(0,m.b7)({getCoreRowModel:(0,g.sC)(),getRowId:e=>e.id,manualPagination:!0,data:p,columns:b,columnResizeMode:"onChange"});return(0,i.jsx)(a.kCb,{w:"full",direction:"column",maxH:"lg",children:(0,i.jsx)(f.ZK,{tableInstance:v,onRowClick:e=>d(e.id),footer:!!x&&(0,i.jsx)(f.vr,{totalColumns:2,children:(0,i.jsx)(a.kCb,{justify:"center",children:c?(0,i.jsx)(j.Z,{size:"xs"}):(0,i.jsxs)(a.kCb,{align:"center",children:[(0,i.jsxs)(a.xvT,{fontSize:"xs",mr:4,children:["Showing ",t.length," of ",n]}),(0,i.jsx)(a.wpx,{onClick:x,size:"small","data-testid":"load-more-btn",children:"Load more..."})]})})})})})};let Z={items:[],total:1,page:1,size:50,pages:0};var M=e=>{let[t,n]=(0,h.useState)(2),{data:i,isLoading:a}=(0,v.QW)({page:1,size:25,connection_config_key:e}),{items:l,total:o}=null!=i?i:Z,s=!!(null==i?void 0:i.pages)&&t>i.pages,[r,c]=(0,h.useState)(l),[d,{isLoading:u,isFetching:x}]=(0,v.Ym)(),g=async()=>{var i,a;if(s)return;let l=await d({connection_config_key:e,size:25,page:t+1});l.isError||(n(t+1),c([...r,...null!==(a=null===(i=l.data)||void 0===i?void 0:i.items)&&void 0!==a?a:[]]))};return{databases:r,totalDatabases:o,fetchMore:g,isLoading:u||x||a,reachedEnd:s}},A=e=>{var t;let{monitor:n,isEditing:l,isSubmitting:o,integrationKey:s,onSubmit:r,onClose:c}=e,{databases:d,totalDatabases:u,fetchMore:x,reachedEnd:g,isLoading:m}=M(s),h=null!==(t=null==n?void 0:n.databases)&&void 0!==t?t:[],{selected:j,excluded:p,allSelected:f,someSelected:b,handleToggleItemSelected:v,handleToggleAll:C}=(0,k.Od)({initialSelected:h,initialExcluded:[],initialAllSelected:l&&!h.length,itemCount:u}),y=!f&&0===j.length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.kCb,{p:4,direction:"column",children:[(0,i.jsxs)(a.kCb,{direction:"row",mb:4,gap:1,align:"center",children:[(0,i.jsx)(a.xvT,{fontSize:"sm",children:"Select projects to monitor"}),(0,i.jsx)(w.Z,{label:"Selecting a project will monitor all current and future datasets within that project."})]}),(0,i.jsx)(R,{items:d,totalItemCount:u,selected:j,excluded:p,allSelected:f,someSelected:b,moreLoading:m,handleToggleSelection:v,handleToggleAll:C,onMoreClick:g?void 0:x})]}),(0,i.jsxs)("div",{className:"mt-4 flex w-full justify-between",children:[(0,i.jsx)(a.wpx,{onClick:c,children:"Cancel"}),(0,i.jsx)(a.ua7,{label:"Select one or more projects to save",isDisabled:!y,children:(0,i.jsx)(a.wpx,{onClick:()=>{r({...n,excluded_databases:p,databases:f?[]:j})},loading:o,type:"primary","data-testid":"save-btn",disabled:y,children:"Save"})})]})]})},E=n(73809),z=n(87941),T=n(34090),D=n(59389),N=n(9043),L=n(42393),O=e=>{var t,n;let{monitor:o,integrationOption:s,isSubmitting:r,databasesAvailable:c,onClose:d,onAdvance:u,onSubmit:x}=e,g=!!o,{query:m}=(0,l.useRouter)(),h=Array.isArray(m.id)?m.id[0]:m.id,j=D.Ry().shape({name:D.Z_().required().label("Name"),execution_frequency:D.Z_().nullable().label("Execution frequency"),execution_start_date:D.hT().nullable().label("Execution start date")}),p=(null==o?void 0:o.execution_start_date)?(0,E.Z)(o.execution_start_date):Date.now(),f={name:null!==(t=null==o?void 0:o.name)&&void 0!==t?t:"",execution_start_date:(0,z.Z)(p,"yyyy-MM-dd'T'HH:mm"),execution_frequency:null!==(n=null==o?void 0:o.execution_frequency)&&void 0!==n?n:L.hV.MONTHLY},b=(0,C.MM)(L.hV);return(0,i.jsx)(T.J9,{initialValues:f,enableReinitialize:!0,onSubmit:e=>{let t=e.execution_frequency!==L.hV.NOT_SCHEDULED?{execution_frequency:e.execution_frequency,execution_start_date:new Date(e.execution_start_date).toISOString()}:{execution_frequency:L.hV.NOT_SCHEDULED,execution_start_date:void 0},n=g?{...o,...t,name:e.name}:{...t,name:e.name,connection_config_key:h,classify_params:{num_samples:25,num_threads:1}};s.identifier===L.Rj.DYNAMODB&&(n.datasource_params={single_dataset:!1}),c?u(n):x(n)},validationSchema:j,children:e=>{let{values:t,isValid:n,resetForm:l}=e;return(0,i.jsx)(T.l0,{children:(0,i.jsxs)(a.gCW,{alignItems:"start",spacing:6,mt:4,children:[(0,i.jsx)(N.j0,{name:"name",id:"name",label:"Name",isRequired:!0,variant:"stacked"}),(0,i.jsx)(N.AP,{name:"execution_frequency",id:"execution_frequency",tooltip:"Interval to run the monitor automatically after the start date",options:b,label:"Automatic execution frequency",variant:"stacked"}),(0,i.jsx)(N.YL,{name:"execution_start_date",label:"Automatic execution start time",disabled:t.execution_frequency===L.hV.NOT_SCHEDULED,id:"execution_start_date"}),(0,i.jsxs)("div",{className:"flex w-full justify-between",children:[(0,i.jsx)(a.wpx,{onClick:()=>{l(),d()},children:"Cancel"}),(0,i.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:!n,loading:r,"data-testid":"next-btn",children:c?"Next":"Save"})]})]})})}})},q=n(43073),I=e=>{let{isOpen:t,onClose:n,formStep:a,onAdvance:l,monitor:o,isEditing:s,integration:r,integrationOption:c}=e,[d,{isLoading:u}]=(0,v.Fy)(),{data:x}=(0,v.QW)({page:1,size:25,connection_config_key:r.key}),g=!!x&&!!x.total,{toastResult:m}=y({defaultSuccessMsg:"Monitor ".concat(s?"updated":"created"," successfully"),defaultErrorMsg:"A problem occurred while ".concat(s?"updating":"creating"," this monitor")}),h=async e=>{let t=await d(e);m(t),(0,q.D4)(t)||n()};return(0,i.jsxs)(_.Z,{title:(null==o?void 0:o.name)?"Configure ".concat(o.name):"Configure discovery monitor",isOpen:t,onClose:n,children:[0===a&&(0,i.jsx)(O,{monitor:o,onClose:n,onAdvance:l,onSubmit:h,isSubmitting:u,databasesAvailable:g,integrationOption:c}),1===a&&(o?(0,i.jsx)(A,{monitor:o,isEditing:s,isSubmitting:u,onSubmit:h,onClose:n,integrationKey:r.key}):(0,i.jsx)(j.Z,{}))]})},P=n(77650),V=n(35682),H=e=>{let{monitorId:t,onEditClick:n}=e,[l]=(0,v.Sb)(),{toastResult:o}=y({defaultErrorMsg:"A problem occurred deleting this monitor",defaultSuccessMsg:"Monitor deleted successfully"}),[s,{isLoading:r}]=(0,v.V9)(),{toastResult:c}=y({defaultErrorMsg:"A problem occurred initiating monitor execution",defaultSuccessMsg:"Monitor execution successfully started"}),d=async()=>{o(await l({monitor_config_id:t}))},{isOpen:u,onOpen:x,onClose:g}=(0,a.qY0)(),m=async()=>{c(await s({monitor_config_id:t}))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.Z,{isOpen:u,onClose:g,onConfirm:d,title:"Delete monitor",message:"Are you sure you want to delete this discovery monitor?",continueButtonText:"Delete",isCentered:!0}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(a.ua7,{label:"Edit",children:(0,i.jsx)(a.wpx,{onClick:n,size:"small",icon:(0,i.jsx)(a.dY8,{}),"data-testid":"edit-monitor-btn","aria-label":"Edit monitor"})}),(0,i.jsx)(a.ua7,{label:"Delete",children:(0,i.jsx)(a.wpx,{onClick:x,size:"small",icon:(0,i.jsx)(a.pJl,{}),"aria-label":"Delete monitor","data-testid":"delete-monitor-btn"})}),(0,i.jsx)(V.Z,{onClick:m,title:"Scan",loading:r})]})]})};let W=e=>{let{row:t,getValue:n}=e,[a]=(0,v.Fy)(),l=async e=>a({...t.original,enabled:e}),o=n();return(0,i.jsx)(b.S1,{enabled:o,onToggle:l,title:"Disabling monitor",message:"You are about to disable this monitor. If you continue, it will no longer scan automatically."})},Y={items:[],total:0,page:1,size:50,pages:0},F=(0,g.Cl)(),G=e=>{let{onAddClick:t}=e;return(0,i.jsx)(a.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:(0,i.jsxs)(a.gCW,{children:[(0,i.jsx)(a.xvT,{fontSize:"md",fontWeight:"600",children:"No monitors"}),(0,i.jsx)(a.xvT,{fontSize:"sm",children:'You have not configured any data discovery monitors. Click "Add monitor" to configure data discovery now.'}),(0,i.jsx)(a.wpx,{onClick:t,type:"primary",children:"Add monitor"})]})})};var B=e=>{let{integration:t,integrationOption:n}=e,{PAGE_SIZES:l,pageSize:o,setPageSize:s,onPreviousPageClick:r,isPreviousPageDisabled:c,onNextPageClick:d,isNextPageDisabled:u,startRange:x,endRange:C,pageIndex:y,setTotalPages:_}=(0,f.oi)(),{isLoading:k,isFetching:w,data:S}=(0,v.Fu)({page:y,size:o,connection_config_key:t.key}),R=(0,a.qY0)(),[Z,M]=(0,h.useState)(void 0),[A,E]=(0,h.useState)(!1),[z,T]=(0,h.useState)(0),D=e=>{M(e),E(!0),R.onOpen()},N=null!=S?S:Y,{items:L,total:O,pages:q}=(0,h.useMemo)(()=>N,[N]);(0,h.useEffect)(()=>{_(q)},[q,_]);let P=(0,h.useMemo)(()=>[F.accessor(e=>e.name,{id:"name",cell:e=>(0,i.jsx)(f.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(f.Rr,{value:"Name",...e})}),F.accessor(e=>e.databases,{id:"projects",cell:e=>0===e.getValue().length?(0,i.jsx)(f.G3,{value:"All projects"}):(0,i.jsx)(f.WP,{suffix:"Projects",value:e.getValue(),...e,cellState:{isExpanded:!0}}),header:e=>(0,i.jsx)(f.Rr,{value:"Scope",...e})}),F.accessor(e=>e.execution_frequency,{id:"frequency",cell:e=>{var t;return(0,i.jsx)(f.G3,{value:null!==(t=e.getValue())&&void 0!==t?t:"Not scheduled"})},header:e=>(0,i.jsx)(f.Rr,{value:"Scan frequency",...e})}),F.accessor(e=>e.last_monitored,{id:"last_monitored",cell:e=>(0,i.jsx)(b.Cy,{time:e.getValue()}),header:e=>(0,i.jsx)(f.Rr,{value:"Last scan",...e})}),F.accessor(e=>e.enabled,{id:"status",cell:W,header:e=>(0,i.jsx)(f.Rr,{value:"Status",...e}),size:0,meta:{disableRowClick:!0}}),F.display({id:"action",cell:e=>(0,i.jsx)(H,{onEditClick:()=>D(e.row.original),monitorId:e.row.original.key}),header:"Actions",meta:{disableRowClick:!0}})],[]),V=(0,m.b7)({getCoreRowModel:(0,g.sC)(),getGroupedRowModel:(0,g.qe)(),getExpandedRowModel:(0,g.rV)(),getRowId:e=>e.name,manualPagination:!0,data:L,columns:P,columnResizeMode:"onChange"});return k?(0,i.jsx)(j.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.xvT,{maxW:"720px",mb:6,fontSize:"sm",children:"A data discovery monitor observes configured systems for data model changes to proactively discover and classify data risks. Monitors can observe part or all of a project, dataset, table, or API for changes and each can be assigned to a different data steward."}),(0,i.jsxs)(f.Q$,{children:[(0,i.jsx)(a.LZC,{}),(0,i.jsx)(a.wpx,{onClick:R.onOpen,size:"small",icon:(0,i.jsx)(p,{}),iconPosition:"end","data-testid":"add-monitor-btn",children:"Add monitor"}),(0,i.jsx)(I,{isOpen:R.isOpen,onClose:()=>{M(void 0),E(!1),T(0),R.onClose()},formStep:z,onAdvance:e=>{M(e),T(1)},monitor:Z,isEditing:A,integration:t,integrationOption:n})]}),(0,i.jsx)(f.ZK,{tableInstance:V,onRowClick:D,emptyTableNotice:(0,i.jsx)(G,{onAddClick:R.onOpen})}),(0,i.jsx)(f.s8,{totalRows:O||0,pageSizes:l,setPageSize:s,onPreviousPageClick:r,isPreviousPageDisabled:c||w,onNextPageClick:d,isNextPageDisabled:u||w,startRange:x,endRange:C})]})},K=n(26953),Q=n(44877),U=e=>{let{isOpen:t,onClose:n,connection:a}=e,l=(0,Q.Z)(a.connection_type);return(0,i.jsx)(_.Z,{title:"Manage integration secret",isOpen:t,onClose:n,children:(0,i.jsx)(K.Z,{connection:a,connectionOption:l,onCancel:n})})},$=n(28638),J=n(42846),X=()=>{var e,t;let{query:n}=(0,l.useRouter)(),g=Array.isArray(n.id)?n.id[0]:n.id,{data:m,isLoading:h}=(0,d.jA)(null!=g?g:""),j=(0,Q.Z)(null==m?void 0:m.connection_type),{testConnection:p,isLoading:f,testData:b}=(0,u.Z)(m),{onOpen:v,isOpen:C,onClose:y}=(0,a.qY0)(),{overview:_,instructions:k}=(0,x.ZP)(null==m?void 0:m.connection_type),w=(0,l.useRouter)();m&&!x.jq.includes(m.connection_type)&&w.push(r.KH);let S=[{label:"Connection",content:(0,i.jsxs)(a.xuv,{maxW:"720px",children:[(0,i.jsxs)(a.kCb,{borderRadius:"md",outline:"1px solid",outlineColor:"gray.100",align:"center",p:3,children:[(0,i.jsx)(a.kCb,{flexDirection:"column",children:(0,i.jsx)($.Z,{testData:b})}),(0,i.jsx)(a.LZC,{}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(a.wpx,{onClick:p,loading:f,"data-testid":"test-connection-btn",children:"Test connection"}),(0,i.jsx)(a.wpx,{onClick:v,"data-testid":"manage-btn",children:"Manage"})]})]}),(0,i.jsx)(U,{isOpen:C,onClose:y,connection:m}),_,k]})},{label:"Data discovery",content:(0,i.jsx)(B,{integration:m,integrationOption:j})}];return(0,i.jsx)(s.Z,{title:"Integrations",children:(0,i.jsxs)(c.Z,{breadcrumbs:[{title:"Integrations",link:r.KH},{title:null!==(t=null!==(e=null==m?void 0:m.name)&&void 0!==e?e:null==m?void 0:m.key)&&void 0!==t?t:""}],children:[(0,i.jsx)(J.Z,{integration:m,showDeleteButton:!0}),h?(0,i.jsx)(a.$jN,{}):!!m&&(0,i.jsx)(o.Z,{data:S,isLazy:!0})]})})}}},function(e){e.O(0,[8033,6451,4554,2866,9278,1749,8540,6258,2888,9774,179],function(){return e(e.s=50697)}),_N_E=e.O()}]);