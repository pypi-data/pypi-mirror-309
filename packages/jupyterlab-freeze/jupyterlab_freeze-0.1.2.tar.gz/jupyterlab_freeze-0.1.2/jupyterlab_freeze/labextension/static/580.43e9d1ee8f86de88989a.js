"use strict";(self.webpackChunkjupyterlab_freeze=self.webpackChunkjupyterlab_freeze||[]).push([[580],{580:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var a=o(919),n=o(802),l=o(709),r=o(830),d=o(29),s=o.n(d),c=o(434);function i(e){return m(e)?!0===e.model.getMetadata("frozen")?"frozen":!1===e.model.getMetadata("editable")?"read_only":"normal":"normal"}function m(e){return"code"==e.model.type||"markdown"==e.model.type}function u(e,t){if(m(t)){switch(e){case"normal":t.model.setMetadata("editable",!0),t.model.setMetadata("deletable",!0),t.model.setMetadata("frozen",!1),t.removeClass("jp-mod-frozen"),t.removeClass("jp-mod-frozen-readonly");break;case"read_only":t.model.setMetadata("editable",!1),t.model.setMetadata("deletable",!1),t.model.setMetadata("frozen",!1),t.removeClass("jp-mod-frozen"),t.addClass("jp-mod-frozen-readonly");break;case"frozen":t.model.setMetadata("editable",!1),t.model.setMetadata("deletable",!1),t.model.setMetadata("frozen",!0),t.addClass("jp-mod-frozen"),t.removeClass("jp-mod-frozen-readonly")}t.update()}}function f(e,t){t.content.selectedCells.forEach((t=>{u(i(t)===e?"normal":e,t)})),t.update()}const b=e=>s().createElement(s().Fragment,null,s().createElement("div",{title:"Lift restrictions from selected cells"},s().createElement("button",{className:"jp-ToolbarButtonComponent jp-mod-minimal jp-Button","aria-pressed":"false","aria-disabled":"false",onClick:()=>f("normal",e.notebook)},s().createElement(c.jcU,null))),s().createElement("div",{title:"Make selected cells read-only"},s().createElement("button",{className:"jp-ToolbarButtonComponent jp-mod-minimal jp-Button","aria-pressed":"false","aria-disabled":"false",onClick:()=>f("read_only",e.notebook)},s().createElement(c.kUi,null))),s().createElement("div",{title:"Freeze selected cells"},s().createElement("button",{className:"jp-ToolbarButtonComponent jp-mod-minimal jp-Button","aria-pressed":"false","aria-disabled":"false",onClick:()=>f("frozen",e.notebook)},s().createElement(c.pKb,null))));class p extends r.ReactWidget{constructor(e){super(),this.notebook=e,this.notebook.context.ready.then((()=>{var e;let t=this.notebook.content;const o=(null===(e=t.model)||void 0===e?void 0:e.cells.length)||0;for(var a=0;a<o;a++){let e=t.widgets[a];u(i(e),e)}this.notebook.update()}))}render(){return s().createElement(b,{notebook:this.notebook})}}const g=l.CodeCell.execute;l.CodeCell.execute=async function(e,t,o){if(!e.model.getMetadata("frozen"))return g(e,t,o)};const z="jupyterlab_freeze:plugin",y="--jp-freeze-frozen-bg",k="--jp-freeze-readonly-bg",j={id:z,description:"Jupyterlab version of freeze extension",autoStart:!0,requires:[n.INotebookTracker,a.ISettingRegistry],activate:(e,t,o)=>{console.log("JupyterLab extension jupyterlab_freeze is activated!");let a=null,n=null;function l(e){a=e.get(y).composite,n=e.get(k).composite,document.documentElement.style.setProperty(y,a),document.documentElement.style.setProperty(k,n)}Promise.all([e.restored,o.load(z)]).then((([,e])=>{l(e),e.changed.connect(l)})).catch((e=>{console.error(`jupyterlab_freeze: Something went wrong when reading the settings.\n${e}`)})),t.widgetAdded.connect(((e,t)=>{const o=t.toolbar,a=new p(t);o.addItem("freeze",a),t.disposed.connect((()=>{a.dispose()}))})),e.commands.addCommand("notebook:toggle-cell-freeze",{label:"Freeze/Unfreeze Cell",execute:()=>{const e=t.currentWidget;e&&f("frozen",e)},isEnabled:()=>!!t.currentWidget}),e.commands.addCommand("notebook:toggle-cell-read-only",{label:"Set Cell to Read-Only or Back to Editable",execute:()=>{const e=t.currentWidget;e&&f("read_only",e)},isEnabled:()=>!!t.currentWidget})}}}}]);