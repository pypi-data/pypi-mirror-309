"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{30695:function(e,t,i){i.d(t,{_i:function(){return n},gz:function(){return o},hw:function(){return s},sj:function(){return a},wG:function(){return r}});var l=i(20357);async function r(e,t){var i;let{arg:r}=t,n=await fetch((null!==(i=l.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"")+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!(n.status>=200&&n.status<300))throw Error(await n.text());let a=await n.json();if(!n.ok)throw Error(a.message);return a}let n=async function(){for(var e,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];let n=await fetch((null!==(e=l.env.NEXT_PUBLIC_API_SERVER)&&void 0!==e?e:"")+i[0],i[1]);if(!n.ok)throw Error(await n.text());return n.json()},a=async(e,t)=>{var i;let r=await fetch((null!==(i=l.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"")+e,t);if(!r.ok)throw Error(await r.text());return r};async function s(e,t){var i;let{arg:r}=t,n=await fetch("".concat(null!==(i=l.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"").concat(e,"/").concat(r),{method:"DELETE"});if(!n.ok)throw Error(await n.text());return n}async function o(e,t){var i;let{arg:r}=t,n=await fetch("".concat(null!==(i=l.env.NEXT_PUBLIC_API_SERVER)&&void 0!==i?i:"").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw Error(await n.text());return n}},12951:function(e,t,i){i.d(t,{Bf:function(){return s},JB:function(){return o},ZP:function(){return a}});var l=i(91617),r=i(30695),n=i(2265);function a(){let{data:e,error:t,isLoading:i}=(0,l.ZP)("/v1/streamers",r._i);return{isLoading:i,streamers:e}}function s(){let{data:e,error:t,isLoading:i}=(0,l.ZP)("/v1/users",r._i),[a,s]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(!e||0===e.length)return;let t=async e=>{try{var t;let i=await (0,r._i)("/bili/space/myinfo?user=".concat(e.value),void 0),l=await (0,r.sj)("/bili/proxy?url=".concat(null===(t=i.data)||void 0===t?void 0:t.face)),n=await l.blob();return{...e,name:i.data.name,face:URL.createObjectURL(n)}}catch(l){console.error(l);let t=await (0,r.sj)("/bili/proxy?url=https://i0.hdslb.com/bfs/face/member/noface.jpg"),i=await t.blob();return{...e,name:"Cookie已失效",face:URL.createObjectURL(i)}}};Promise.all(e.map(t)).then(s)},[e]),{isLoading:i,isError:t,biliUsers:a}}function o(){var e;let{data:t,error:i,isLoading:n}=(0,l.ZP)("/bili/archive/pre",r._i);return{isLoading:n,isError:i,typeTree:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.typelist.map(e=>({label:e.name,value:e.id,children:e.children}))}}},44623:function(e,t,i){i.d(t,{cE:function(){return n},f:function(){return l},ql:function(){return r}});let l={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},r=(e,t)=>{let{match:i,unmatch:l,callInInit:r=!0}=t;{let t=window.matchMedia(e),n=function(e){e.matches?i&&i(e):l&&l(e)};return(r&&n(t),Object.prototype.hasOwnProperty.call(t,"addEventListener"))?(t.addEventListener("change",n),()=>t.removeEventListener("change",n)):(t.addListener(n),()=>t.removeListener(n))}},n=e=>new Date(1e3*e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll("/","-")},54935:function(e,t,i){var l=i(57437),r=i(2265),n=i(98964),a=i(36710),s=i(52293),o=i(15981),c=i(48936),d=i(12951);t.Z=e=>{var t,i;let{formState:u,formApi:h,values:x}=e,{Section:p,Input:f,DatePicker:m,TimePicker:v,Select:j,Switch:y,InputNumber:w,Checkbox:b,CheckboxGroup:g,RadioGroup:_,Radio:E,Cascader:S,TagInput:C,TextArea:P}=c.Form,{Text:L}=c.Typography,{typeTree:k,isError:R,isLoading:T}=(0,d.JB)(),F=null==k?void 0:k.map(e=>({...e,children:e.children.map(e=>({label:(0,l.jsxs)(l.Fragment,{children:[e.name," ",(0,l.jsx)(L,{type:"quaternary",size:"small",children:e.desc})]}),value:e.id}))})),O=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g,{field:"sound",options:[{label:"杜比音效",value:"dolby"},{label:"Hi-Res无损音质",value:"hires"}],direction:"horizontal",label:"音效设置"}),(0,l.jsx)(g,{field:"interaction",options:[{label:"关闭弹幕",value:"up_close_danmu"},{label:"关闭评论",value:"up_close_reply"},{label:"开启精选评论",value:"up_selection_reply"}],direction:"horizontal",label:"互动设置"}),(0,l.jsx)(f,{field:"dynamic",label:"粉丝动态",style:{width:464}}),(0,l.jsxs)(c.Form.Select,{field:"uploader",label:"上传插件",initValue:null!==(t=x.uploader)&&void 0!==t?t:"biliup-rs",style:{width:250},showClear:!0,children:[(0,l.jsx)(c.Form.Select.Option,{value:"bili_web",children:"bili_web"}),(0,l.jsx)(c.Form.Select.Option,{value:"biliup-rs",children:"biliup-rs"}),(0,l.jsx)(c.Form.Select.Option,{value:"Noop",children:"Noop"})]}),(0,l.jsx)(y,{field:"no_reprint",label:"自制声明"}),(0,l.jsx)(c.Form.Switch,{field:"open_elec",label:"开启充电面板"}),(0,l.jsx)(c.OF,{field:"credits",children:e=>{let{add:t,arrayFields:i}=e;return(0,l.jsxs)(c.Form.Section,{text:"简介@替换",children:[(0,l.jsxs)("div",{className:"semi-form-field-extra",style:{fontSize:"14px"},children:["如需在简介中@别人，请使用此项。示例：",(0,l.jsx)("br",{}),"简介：","{","streamer","}","主播直播间地址：","{","url","}"," 【@credit】",(0,l.jsx)("br",{}),'其中的"@credits"会依次替换为下面输入的@']}),(0,l.jsx)(c.zx,{icon:(0,l.jsx)(n.Z,{}),onClick:t,theme:"light",children:"添加行"}),i.map((e,t)=>{let{field:i,key:r,remove:n}=e;return(0,l.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,l.jsxs)(c.BZ,{children:[(0,l.jsx)(f,{field:"".concat(i,".username"),label:"需要@的用户名",placeholder:"username"}),(0,l.jsx)(f,{field:"".concat(i,".uid"),label:"需要@的uid",placeholder:"uid"})]}),(0,l.jsx)(c.zx,{type:"danger",theme:"borderless",icon:(0,l.jsx)(a.Z,{}),onClick:n,style:{margin:12}})]},r)})]})}})]}),[z,B]=(0,r.useState)(!1),{biliUsers:I}=(0,d.Bf)(),N=null==I?void 0:I.map(e=>({value:e.value,label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.qE,{size:"extra-small",src:e.face}),(0,l.jsx)("span",{style:{marginLeft:8},children:e.name})]})}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p,{text:"基本信息",children:[(0,l.jsx)(f,{rules:[{required:!0}],field:"template_name",label:"模板名称",style:{width:464}}),(0,l.jsx)(c.Form.Select,{rules:[{required:!0}],field:"user_cookie",label:{text:"投稿账号"},style:{width:176},optionList:N})]}),(0,l.jsxs)(p,{text:"基本设置",children:[(0,l.jsx)(f,{field:"title",label:"视频标题",style:{width:464},placeholder:"稿件标题",extraText:(0,l.jsxs)("div",{style:{fontSize:14},children:["{","streamer","}",": 录播备注",(0,l.jsx)("br",{}),"{","title","}",": 直播标题",(0,l.jsx)("br",{}),"%Y-%m-%d %H_%M_%S: 开始录制时的 年-月-日 时_分_秒"]})}),(0,l.jsxs)(_,{field:"copyright",label:"类型",direction:"vertical",initValue:null!==(i=h.getValue("copyright"))&&void 0!==i?i:2,extraText:(0,l.jsx)("div",{style:{fontSize:14},children:"如不填写转载来源默认为直播间地址"}),children:[(0,l.jsxs)(E,{value:2,style:{alignItems:"center",flexShrink:0},children:[(0,l.jsx)("span",{style:{flexShrink:0},children:"转载"}),(0,l.jsx)(f,{field:"copyright_source",onClick:()=>h.setValue("copyright",2),placeholder:"转载视频请注明来源（例：转自http://www.xx.com/yy）注明来源会更快地通过审核哦",noLabel:!0,fieldStyle:{padding:0,marginLeft:24,width:560}})]}),(0,l.jsx)("div",{onClick:()=>h.setValue("copyright_source",""),children:(0,l.jsx)(E,{value:1,children:"自制"})})]}),(0,l.jsx)(S,{field:"tid",label:"分区",style:{width:272},treeData:F,placeholder:"投稿分区",dropdownStyle:{maxWidth:670},rules:[{required:!0}]}),(0,l.jsx)(C,{max:12,maxLength:20,field:"tags",label:"标签",allowDuplicates:!1,addOnBlur:!0,separator:",",placeholder:"可用英文逗号分隔以批量输入标签，失焦/Enter 以保存",onChange:e=>console.log(e),style:{width:560},rules:[{required:!0,message:"Tag不能为空"}],onExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"标签数量不能超过12个",duration:3})},onInputExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"单个标签字数不能超过20",duration:3})}}),(0,l.jsx)(f,{field:"cover_path",label:"视频封面",style:{width:464},placeholder:"/cover/up.jpg"}),(0,l.jsx)(P,{style:{maxWidth:560},field:"description",label:"简介",placeholder:"填写更全面的相关信息，让更多的人能找到你的视频吧",autosize:!0,maxCount:2e3,showClear:!0}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"var(--semi-color-tertiary)"},children:[(0,l.jsx)(y,{field:"isDtime",label:{text:"定时发布"},checkedText:"｜",uncheckedText:"〇"}),(0,l.jsx)("span",{style:{paddingLeft:12,fontSize:12},children:"(当前+2小时 ≤ 可选时间 ≤ 当前+15天，转载稿件撞车判定以过审发布时间为准)"})]}),x.isDtime?(0,l.jsx)(m,{field:"dtime",label:" ",type:"dateTime",fieldStyle:{paddingTop:0}}):null]}),(0,l.jsx)(p,{style:{paddingBottom:40},text:(0,l.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>{B(!z),h.scrollToField("isDtime")},children:["更多设置 ",z?(0,l.jsx)(s.Z,{style:{marginLeft:12}}):(0,l.jsx)(o.Z,{style:{marginLeft:12}})]}),children:(0,l.jsx)(c.zF,{isOpen:z,keepDOM:!0,children:O})})]})}},36710:function(e,t,i){var l=i(2265);let r=(0,i(26018).A)(function(e){return l.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM6.5 10.5H17.5C18.3284 10.5 19 11.1716 19 12C19 12.8284 18.3284 13.5 17.5 13.5H6.5C5.67157 13.5 5 12.8284 5 12C5 11.1716 5.67157 10.5 6.5 10.5Z",fill:"currentColor"}))},"minus_circle");t.Z=r},16463:function(e,t,i){var l=i(71169);i.o(l,"usePathname")&&i.d(t,{usePathname:function(){return l.usePathname}}),i.o(l,"useRouter")&&i.d(t,{useRouter:function(){return l.useRouter}}),i.o(l,"useSearchParams")&&i.d(t,{useSearchParams:function(){return l.useSearchParams}})}}]);