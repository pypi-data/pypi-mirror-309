# ------------------------------------------------------------------------------
#  This is an example ini file for hades3. It is based on the classic
#  parameters which were used in ares/borg 1.0. This is not advised to continue
#  using this notation beyond 2.0 and one should switch to the example 
#  in 2mpp_hades_v2.ini.txt
#
#  The description of the entries for [gravity] are documented on the wiki at
#  the address:
#  https://www.aquila-consortium.org/wiki/index.php?title=ARES_Configuration_file&oldid=1669
#
#  Otherwise please check the v2.0 entry in :
#  https://www.aquila-consortium.org/wiki/index.php?title=ARES_Configuration_file
#
[system]

# This specifies the base name of the log files generated by hades3
console_output=logares.txt

# This is an outdated way of setting the mask precision. Basically the accuracy
# increase when this number goes to zero.
mask_precision=0.9

# Level of verbosity of the console output. The log files always contains the 
# maximum level of verbosity allowed by the software.
VERBOSE_LEVEL = 2

# 3d mesh specification: grid size
N0 = 32 
N1 = 32
N2 = 32

# 3d mesh specification: physical scale
L0 = 677.7
L1 = 677.7
L2 = 677.7

# 3d mesh specification: physical corner of the mesh, w.r.t to the observer
corner0 = -338.85
corner1 = -338.85
corner2 = -338.85

# Indicate whether we will run a self-consistent test.
test_mode=true

# If true, the initial power spectrum of the chain is set to the cosmological one
seed_cpower=true

# These are flags to prevent the bias parameters to be sampled
# *ONLY FOR GENERIC FRAMEWORK BIAS*
# The template is bias_X_sampler_generic_blocked, where X is the parameter id.
bias_0_sampler_generic_blocked=false
bias_1_sampler_generic_blocked=false
bias_2_sampler_generic_blocked=false
bias_3_sampler_generic_blocked=false
bias_4_sampler_generic_blocked=true

# This is required but deprecated (and actually ignored)
NUM_MODES=100

[block_loop]
# Indicate which samplers should be blocked for testing purposes
#messenger_signal_blocked=false
power_sampler_a_blocked=true
power_sampler_b_blocked=true
power_sampler_c_blocked=true
#bias_sampler_blocked=false

# Do not block density sampling
hades_sampler_blocked=false


ares_heat=1.0

#
# This specifies the forward model component, without the bias/selection part.
#
[gravity]
model=LPT_CIC
supersampling=2
forcesampling=2
pm_nsteps=30
pm_start_z=69
lightcone=false
do_rsd=false
a_initial=0.01
a_final=1.0
part_factor=1.2

[mcmc]
number_to_generate=1000

# If random_ic is set to true, a gaussian random noise is generated before
# starting the run
random_ic=false
# Scaling of random ic, either randomized or not.
# This is multiplicative factor apply to the IC (after potential randomization)
# before starting the run.
# In the current setting nothing is randomized, thus the chain starts from the
# mock data setup, there will not be any "burn in"
init_random_scaling=1.0

# Likelihood additional data
# here 
[likelihood]
#colormap_sky=sky.fits

[hades]
# Other choices that are possible:
#   GENERIC_POISSON_BROKEN_POWERLAW_BIAS_DEGRADE4
#   GENERIC_POISSON_BROKEN_POWERLAW_BIAS
#   BORG_POISSON
#   .... (see wiki for bias models)
#likelihood=ROBUST_POISSON_POWERLAW_BIAS
likelihood=BORG_POISSON

# Algorithm to use to sample density field
#    HMC, QN-HMC, FROZEN-PHASE are available
algorithm=HMC

# Max epsilon for the HMC sampler
max_epsilon=0.01
# Max number of timesteps for HMC
max_timesteps=50

# Number of full loop to run before an MCMC file is produced
mixing=1

# Number of times to loop on bias samplers before doing one density sampler
bias_mixing=1

[run]
NCAT = 16

# ------------------------------------------------------------------------------
# Section on cosmology
[cosmology]
omega_r = 0
fnl = 0
omega_k = 0
omega_m = 0.3175
omega_b = 0.049
omega_q = 0.6825
w = -1
wprime = 0
n_s = 0.9624
sigma8 = 0.8344
h100 = 0.6711
beta = 1.5 
z0 = 0


# ------------------------------------------------------------------------------
# Now we describe all catalogs

# 11.5 mag cut

[catalog_0]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
bias=1,1,0.1,0.100
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -21.50
galaxy_faint_absolute_magnitude_cut = -21.00
refbias = false
nmean=1

[catalog_1]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -22.00
galaxy_faint_absolute_magnitude_cut = -21.50
refbias = false
nmean=1



[catalog_2]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -22.50
galaxy_faint_absolute_magnitude_cut = -22.00
refbias = false
nmean=1


[catalog_3]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -23.00
galaxy_faint_absolute_magnitude_cut = -22.50
refbias = false
nmean=1


[catalog_4]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -23.50
galaxy_faint_absolute_magnitude_cut = -23.00
refbias = false
nmean=1

[catalog_5]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -24.00
galaxy_faint_absolute_magnitude_cut = -23.50
refbias = false
nmean=1

[catalog_6]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -24.50
galaxy_faint_absolute_magnitude_cut = -24.00
refbias = false
nmean=1

[catalog_7]
datafile = 2MPP.txt
maskdata = completeness_11_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 9
galaxy_faint_apparent_magnitude_cut = 11.5
galaxy_bright_absolute_magnitude_cut = -25.00
galaxy_faint_absolute_magnitude_cut = -24.50
refbias = false
nmean=1






# 11.5 - 12.5 mag cut

[catalog_8]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -21.50
galaxy_faint_absolute_magnitude_cut = -21.00
refbias = false
nmean=1



[catalog_9]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -22.00
galaxy_faint_absolute_magnitude_cut = -21.50
refbias = false
nmean=1.

[catalog_10]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -22.50
galaxy_faint_absolute_magnitude_cut = -22.00
refbias = false
nmean=1

[catalog_11]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -23.00
galaxy_faint_absolute_magnitude_cut = -22.50
refbias = false
nmean=1

[catalog_12]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -23.50
galaxy_faint_absolute_magnitude_cut = -23.00
refbias = false
nmean=1

[catalog_13]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -24.00
galaxy_faint_absolute_magnitude_cut = -23.50
refbias = false
nmean=1

[catalog_14]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -24.50
galaxy_faint_absolute_magnitude_cut = -24.00
refbias = false
nmean=1

[catalog_15]
datafile = 2MPP.txt
maskdata = completeness_12_5.fits.gz
radial_selection = schechter
schechter_mstar = -23.28
schechter_alpha = -0.94
schechter_sampling_rate = 1000
schechter_dmax = 700
galaxy_bright_apparent_magnitude_cut = 11.5
galaxy_faint_apparent_magnitude_cut = 12.5
galaxy_bright_absolute_magnitude_cut = -25.00
galaxy_faint_absolute_magnitude_cut = -24.50
refbias = false
nmean=1

