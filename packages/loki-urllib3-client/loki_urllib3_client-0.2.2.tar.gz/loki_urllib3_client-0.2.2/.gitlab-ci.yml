stages:
  - test
  - deploy

deploy:
  environment: PROD
  stage: deploy
  image: python:3.10
  script:
    - python3 -m pip install build twine
    - python3 -m build
    - python3 -m twine upload --repository pypi dist/* --verbose
  rules:
    - if: $CI_COMMIT_TAG
