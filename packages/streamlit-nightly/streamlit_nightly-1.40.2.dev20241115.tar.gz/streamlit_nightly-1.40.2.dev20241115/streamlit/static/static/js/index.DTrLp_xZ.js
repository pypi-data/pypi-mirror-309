import{n as H,r as o,I as R,bV as I,a4 as U,j as u,aX as k,b8 as z,aY as L,aH as B,aZ as D,bX as j}from"./index.BAAooOnj.js";import{u as O}from"./uniqueId.DddRNlb8.js";import{u as _,a as K,b as X}from"./useOnInputChange.DvN2d7Gr.js";import{a as q}from"./useBasicWidgetState.HfBMIxUW.js";import{I as w}from"./InputInstructions.D_FwW2KI.js";import{I as A}from"./input.CakYXbxi.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.Cgm_WGAf.js";import"./base-input.DkA5nUKm.js";const G=H("div",{target:"e6m0wlp0"})(({width:e})=>({position:"relative",width:e}));function rt({disabled:e,element:t,widgetMgr:s,width:n,fragmentId:m}){var g;const[r,l]=o.useState(S(s,t)??null),[i,d]=o.useState(!1),W=o.useCallback(()=>{l(t.default??null),d(!0)},[t.default]),[y,p]=q({getStateFromWidgetMgr:S,getDefaultStateFromProto:N,getCurrStateFromProto:Y,updateWidgetMgrState:Z,element:t,widgetMgr:s,fragmentId:m,onFormCleared:W});_(y,r,l,i);const[T,h]=o.useState(!1),a=R(),[f]=o.useState(()=>O("text_input_")),{placeholder:x,formId:b}=t,c=o.useCallback(()=>{d(!1),p({value:r,fromUi:!0})},[r,p]),V=I({formId:b})?s.allowFormEnterToSubmit(b):i,C=T&&n>a.breakpoints.hideWidgetDetails,F=o.useCallback(()=>{i&&c(),h(!1)},[i,c]),v=o.useCallback(()=>{h(!0)},[]),E=K({formId:t.formId,maxChars:t.maxChars,setDirty:d,setUiValue:l,setValueWithSource:p}),P=X(t.formId,c,i,s,m);return U(G,{className:"stTextInput","data-testid":"stTextInput",width:n,children:[u(D,{label:t.label,disabled:e,labelVisibility:k((g=t.labelVisibility)==null?void 0:g.value),htmlFor:f,children:t.help&&u(z,{children:u(L,{content:t.help,placement:B.TOP_RIGHT})})}),u(A,{value:r??"",placeholder:x,onBlur:F,onFocus:v,onChange:E,onKeyPress:P,"aria-label":t.label,disabled:e,id:f,type:$(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:a.lineHeights.inputWidget,paddingRight:a.spacing.sm,paddingLeft:a.spacing.sm,paddingBottom:a.spacing.sm,paddingTop:a.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:a.sizes.minElementHeight,borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth}}}}),C&&u(w,{dirty:i,value:r??"",maxLength:t.maxChars,inForm:I({formId:t.formId}),allowEnterToSubmit:V})]})}function S(e,t){return e.getStringValue(t)??null}function N(e){return e.default??null}function Y(e){return e.value??null}function Z(e,t,s,n){t.setStringValue(e,s.value,{fromUi:s.fromUi},n)}function $(e){return e.type===j.Type.PASSWORD?"password":"text"}export{rt as default};
//# sourceMappingURL=index.DTrLp_xZ.js.map
